


<div id="messes_map_canvas">
      <%= javascript_tag "initMap('messes_map_canvas', 'mess_list');" %> 
      <% @violations.each do |v| %>
        <%= javascript_tag "addMarker('#{v.status}', '#{v.violation_type}', '#{v.description}', #{v.lat}, #{v.lng});" %>
      <% end %>
</div>

<div class="row">
  <div class="mess-map-legend">
    <p><span class="bold">Legend:</span> Cleaned: <span class="green-text">Green</span> | Big Item: <span class="red-text">Red</span> | Mess: <span class="orange-text">Orange</span> | Weeds: <span class="yellow-text">Yellow</span></p>
  </div>

  <div id="messes-filter">

     <div class="filter-dropdown">
      <div class="btn-group">
        <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
            <%= @date_filter %> <span class="caret"></span>
        </button>
        <ul class="dropdown-menu" role="menu">
          <li><%= link_to "Last Week", params.merge({:time_span => "week"}) %></li>
          <li><%= link_to "Last Month", params.merge({:time_span => "month"}) %></li>
          <li><%= link_to "Last Three Months", params.merge({:time_span => "month_3"}) %></li>
          <li><%= link_to "All", params.merge({:time_span => "all"}) %></li>
        </ul>
      </div>
    </div>

    <div class="filter-dropdown">
      <div class="btn-group">
        <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
            <%= @status_filter %> <span class="caret"></span>
        </button>
        <ul class="dropdown-menu" role="menu">
          <li><%= link_to "Open", params.merge({:status => "open"}) %></li>
          <li><%= link_to "Closed", params.merge({:status => "closed"}) %></li>
          <li><%= link_to "All", params.merge({:status => "all"}) %></li>
        </ul>
      </div>
    </div>

  </div>
</div>

<section id="friends">
    <%= render @violations %>
    <%= will_paginate %>
</section>







